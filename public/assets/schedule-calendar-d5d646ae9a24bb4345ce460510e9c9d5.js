var linkToDay=function(e){$("#calendar").fullCalendar("gotoDate",e.utc()),setFCView("agendaDay")},onDayClick=function(e,a,t){linkToDay(e)},resetFCSize=function(){var e=$("#calendar").height();$("#calendar").fullCalendar("option","height",e)},setFCTitle=function(e,a){var t=e.title;$("#calendar-title").text(t)},onViewRender=function(e,a){$("#calendar").attr("data-fc-view",e.name),setFCViewSettings(e,a),setFCTitle(e,a)},getFCView=function(e){return e>800?"basicWeek":"agendaDay"},setFCView=function(e){$("#calendar").fullCalendar("changeView",e)},setFCViewSettings=function(e,a){},transformData=function(e){var a="know-fcevent";a+=" ",a+=e.is_current_user?"know-cuser":"know-user";var t={title:e.summary,start:e.start,end:e.end,url:e.url,className:a};return t};$(document).on("page:change",function(){var e=$("#calendar").data();$("#calendar").fullCalendar({viewRender:onViewRender,dayClick:onDayClick,events:"/schedule/list.json",eventDataTransform:transformData,height:$("#calendar").height(),defaultView:"basicWeek",slotDuration:"01:00:00",allDaySlot:!1,header:{left:"prev",center:"agendaDay, basicWeek, month, today",right:"next"},views:{month:{titleFormat:"MM | YYYY",columnFormat:"ddd"},week:{titleFormat:"MM | YYYY",columnFormat:"ddd D"},day:{titleFormat:"MM | YYYY",columnFormat:"ddd D"}}}),e.date&&linkToDay(moment(e.date)),$(window).on("resize",function(){resetFCSize()})});